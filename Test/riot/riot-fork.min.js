/* Riot WIP, @license MIT, (c) 2015 Muut Inc. + contributors */
(function(e,t){"use strict";var n={version:"WIP",settings:{}},r=0,i=[],o={},a="riot-",f=a+"tag",u="string",s="object",c="undefined",l="function",p=/^(?:opt(ion|group)|tbody|col|t[rhd])$/,d=["_item","_id","_parent","update","root","mount","unmount","mixin","isMounted","isLoop","tags","parent","opts","trigger","on","off","one"],g=(e&&e.document||{}).documentMode|0;n.observable=function(e){e=e||{};var t={},n=function(e,t){e.replace(/\S+/g,t)},r=function(t,n){Object.defineProperty(e,t,{value:n,enumerable:false,writable:false,configurable:false})};r("on",function(r,i){if(typeof i!="function")return e;n(r,function(e,n){(t[e]=t[e]||[]).push(i);i.typed=n>0});return e});r("off",function(r,i){if(r=="*")t={};else{n(r,function(e){if(i){var n=t[e];for(var r=0,o;o=n&&n[r];++r){if(o==i)n.splice(r--,1)}}else delete t[e]})}return e});r("one",function(t,n){function r(){e.off(t,r);n.apply(e,arguments)}return e.on(t,r)});r("trigger",function(r){var i=arguments.length-1,o=new Array(i);for(var a=0;a<i;a++){o[a]=arguments[a+1]}n(r,function(n){var r=(t[n]||[]).slice(0);for(var i=0,a;a=r[i];++i){if(a.busy)return;a.busy=1;try{a.apply(e,a.typed?[n].concat(o):o)}catch(f){e.trigger("error",f)}if(r[i]!==a){i--}a.busy=0}if(t.all&&n!="all")e.trigger.apply(e,["all",n].concat(o))});return e});return e};(function(t){if(!e)return;var n=/^.+?\/+[^\/]+/,r="EventListener",i="remove"+r,o="add"+r,a="hasAttribute",f="replace",u="popstate",s="hashchange",c="trigger",l=3,p=e,d=document,g=p.history.location||p.location,h=R.prototype,v=d&&d.ontouchstart?"touchstart":"click",m=false,b=t.observable(),y=false,w,x,_,S,C,N=[],E=0;function L(e){return e.split(/[\/?#]/)}function O(e,t){var n=new RegExp("^"+t[f](/\*/g,"([^/?#]+?)")[f](/\.\./,".*")+"$"),r=e.match(n);if(r)return r.slice(1)}function j(e,t){var n;return function(){clearTimeout(n);n=setTimeout(e,t)}}function T(e){w=j(I,1);p[o](u,w);p[o](s,w);d[o](v,H);if(e)I(true)}function R(){this.$=[];t.observable(this);b.on("stop",this.s.bind(this));b.on("emit",this.e.bind(this))}function M(e){return e[f](/^\/|\/$/,"")}function A(e){return typeof e=="string"}function k(e){return(e||g.href)[f](n,"")}function $(e){return x[0]=="#"?(e||g.href).split(x)[1]||"":k(e)[f](x,"")}function I(e){var t=E==0;if(l<=E)return;E++;N.push(function(){var t=$();if(e||t!=_){b[c]("emit",t);_=t}});if(t){while(N.length){N[0]();N.shift()}E=0}}function H(e){if(e.which!=1||e.metaKey||e.ctrlKey||e.shiftKey||e.defaultPrevented)return;var t=e.target;while(t&&t.nodeName!="A")t=t.parentNode;if(!t||t.nodeName!="A"||t[a]("download")||!t[a]("href")||t.target&&t.target!="_self"||t.href.indexOf(g.href.match(n)[0])==-1)return;if(t.href!=g.href){if(t.href.split("#")[0]==g.href.split("#")[0]||x!="#"&&k(t.href).indexOf(x)!==0||!F($(t.href),t.title||d.title))return}e.preventDefault()}function F(e,t){t=t||d.title;history.pushState(null,t,x+M(e));d.title=t;y=false;I();return y}h.m=function(e,t){if(A(e)&&(!t||A(t)))F(e,t);else if(t)this.r(e,t);else this.r("@",e)};h.s=function(){this.off("*");this.$=[]};h.e=function(e){this.$.concat("@").some(function(t){var n=(t=="@"?S:C)(M(e),M(t));if(typeof n!="undefined"){this[c].apply(null,[t].concat(n));return y=true}},this)};h.r=function(e,t){if(e!="@"){e="/"+M(e);this.$.push(e)}this.on(e,t)};var B=new R;var K=B.m.bind(B);K.create=function(){var e=new R;e.m.stop=e.s.bind(e);return e.m.bind(e)};K.base=function(e){x=e||"#";_=$()};K.exec=function(){I(true)};K.parser=function(e,t){if(!e&&!t){S=L;C=O}if(e)S=e;if(t)C=t};K.query=function(){var e={};g.href[f](/[?&](.+?)=([^&]*)/g,function(t,n,r){e[n]=r});return e};K.stop=function(){if(m){p[i](u,w);p[i](s,w);d[i](v,H);b[c]("stop");m=false}};K.start=function(e){if(!m){if(document.readyState=="complete")T(e);else p[o]("load",function(){setTimeout(function(){T(e)},1)});m=true}};K.base();K.parser();t.route=K})(n);var h=function(e){var t="g",r=/\/\*[^*]*\*+(?:[^*\/][^*]*\*+)*\//g,i=/"[^"\\]*(?:\\[\S\s][^"\\]*)*"|'[^'\\]*(?:\\[\S\s][^'\\]*)*'/g,o=i.source+"|"+/(?:\breturn\s+|(?:[$\w\)\]]|\+\+|--)\s*(\/)(?![*\/]))/.source+"|"+/\/(?=[^*\/])[^[\/\\]*(?:(?:\[(?:\\.|[^\]\\]*)*\]|\\.)[^[\/\\]*)*?(\/)[gim]*/.source,a="{ }",f={"(":RegExp("([()])|"+o,t),"[":RegExp("([[\\]])|"+o,t),"{":RegExp("([{}])|"+o,t)};var u=e,s,c=[];function l(e){return e}function p(e,n){if(!n)n=c;return new RegExp(e.source.replace(/{/g,n[2]).replace(/}/g,n[3]),e.global?t:"")}function d(e){var n,r=e.split(" ");if(e===a){r[2]=r[0];r[3]=r[1];n=l}else{if(r.length!==2||/[\x00-\x1F<>a-zA-Z0-9'",;\\]/.test(e)){throw new Error('Unsupported brackets "'+e+'"')}r=r.concat(e.replace(/(?=[[\]()*+?.^$|])/g,"\\").split(" "));n=p}r[4]=n(r[1].length>1?/{[\S\s]*?}/:/{[^}]*}/,r);r[5]=n(/\\({|})/g,r);r[6]=n(/(\\?)({)/g,r);r[7]=RegExp("(\\\\?)(?:([[({])|("+r[3]+"))|"+o,t);r[8]=e;return r}function g(e){if(!e)e=a;if(e!==c[8]){c=d(e);s=e===a?l:p;c[9]=s(/^\s*{\^?\s*([$\w]+)(?:\s*,\s*(\S+))?\s+in\s+(\S.*)\s*}/);c[10]=s(/(^|[^\\]){=[\S\s]*?}/);h._rawOffset=c[0].length}u=e}function h(e){return e instanceof RegExp?s(e):c[e]}h.split=function b(e,t,n){if(!n)n=c;var r=[],i,o,a,u,s=n[6];o=a=s.lastIndex=0;while(i=s.exec(e)){u=i.index;if(o){if(i[2]){s.lastIndex=p(i[2],s.lastIndex);continue}if(!i[3])continue}if(!i[1]){l(e.slice(a,u));a=s.lastIndex;s=n[6+(o^=1)];s.lastIndex=a}}if(e&&a<e.length){l(e.slice(a))}return r;function l(e){if(t||o)r.push(e&&e.replace(n[5],"$1"));else r.push(e)}function p(t,n){var r,i=f[t],o=1;i.lastIndex=n;while(r=i.exec(e)){if(r[1]&&!(r[1]===t?++o:--o))break}return r?i.lastIndex:e.length}};h.hasExpr=function y(e){return h(4).test(e)};h.loopKeys=function w(e){var t=e.match(h(9));return t?{key:t[1],pos:t[2],val:c[0]+t[3].trim()+c[1]}:{val:e.trim()}};h.array=function x(e){return d(e||u)};var v;function m(e){var t;e=e||{};t=e.brackets;Object.defineProperty(e,"brackets",{set:g,get:function(){return u},enumerable:true});v=e;g(t)}Object.defineProperty(h,"settings",{set:m,get:function(){return v}});h.settings=typeof n!=="undefined"&&n.settings||{};h.set=g;h.R_STRINGS=i;h.R_MLCOMMS=r;h.S_QBLOCKS=o;return h}();var v=function(){var t={};function n(e,n){if(!e)return e;return(t[e]||(t[e]=i(e))).call(n,r)}n.isRaw=function(e){return e[h._rawOffset]==="="};n.haveRaw=function(e){return h(10).test(e)};n.hasExpr=h.hasExpr;n.loopKeys=h.loopKeys;n.errorHandler=null;function r(e,t){if(n.errorHandler){e.riotData={tagName:t&&t.root&&t.root.tagName,_riot_id:t&&t._riot_id};n.errorHandler(e)}}function i(e){var t=f(e);if(t.slice(0,11)!=="try{return ")t="return "+t;return new Function("E",t+";")}var o=RegExp(h.S_QBLOCKS,"g"),a=/\x01(\d+)~/g;function f(e){var t=[],n,r=h.split(e.replace(/\u2057/g,'"'),1);if(r.length>2||r[0]){var i,o,f=[];for(i=o=0;i<r.length;++i){n=r[i];if(n&&(n=i&1?c(n,1,t):'"'+n.replace(/\\/g,"\\\\").replace(/\r\n?|\n/g,"\\n").replace(/"/g,'\\"')+'"'))f[o++]=n}n=o<2?f[0]:"["+f.join(",")+'].join("")'}else{n=c(r[1],0,t)}if(t[0])n=n.replace(a,function(e,n){return t[n].replace(/\r/g,"\\r").replace(/\n/g,"\\n")});return n}var u=/^(?:(-?[_A-Za-z\xA0-\xFF][-\w\xA0-\xFF]*)|\x01(\d+)~):/,s=/,|([[{(])|$/g;function c(e,t,n){if(e[0]==="=")e=e.slice(1);e=e.replace(o,function(e,t){return e.length>2&&!t?""+(n.push(e)-1)+"~":e}).replace(/\s+/g," ").trim().replace(/\ ?([[\({},?\.:])\ ?/g,"$1");if(e){var r=[],i=0,a;while(e&&(a=e.match(u))&&!a.index){var f,s,c=/,|([[{(])|$/g;e=RegExp.rightContext;f=a[2]?n[a[2]].slice(1,-1).trim().replace(/\s+/g," "):a[1];while(s=(a=c.exec(e))[1])l(s,c);s=e.slice(0,a.index);e=RegExp.rightContext;r[i++]=d(s,1,f)}e=!i?d(e,t):i>1?"["+r.join(",")+'].join(" ").trim()':r[0]}return e;function l(t,n){var r,i=1,o=t==="("?/[()]/g:t==="["?/[[\]]/g:/[{}]/g;o.lastIndex=n.lastIndex;while(r=o.exec(e)){if(r[0]===t)++i;else if(!--i)break}n.lastIndex=i?e.length:o.lastIndex}}var l='"in this?this:'+(typeof e!=="object"?"global":"window")+").";var p=/[,{][$\w]+:|(^ *|[^$\w\.])(?!(?:typeof|true|false|null|undefined|in|instanceof|is(?:Finite|NaN)|void|NaN|new|Date|RegExp|Math)(?![$\w]))([$_A-Za-z][$\w]*)/g;function d(e,t,n){var r;e=e.replace(p,function(e,t,n,i,o){if(n){i=r?0:i+e.length;if(n!=="this"&&n!=="global"&&n!=="window"){e=t+'("'+n+l+n;if(i)r=(o=o[i])==="."||o==="("||o==="["}else if(i)r=!/^(?=(\.[$\w]+))\1(?:[^.[(]|$)/.test(o.slice(i))}return e});if(r){e="try{return "+e+"}catch(e){E(e,this)}"}if(n){e=(r?"function(){"+e+"}.call(this)":"("+e+")")+'?"'+n+'":""'}else if(t){e="function(v){"+(r?e.replace("return ","v="):"v=("+e+")")+';return v||v===0?v:""}.call(this)'}return e}n.parse=function(e){return e};return n}();v.version=h.version="v2.3.19";var m=function(e){var t={tr:"tbody",th:"tr",td:"tr",tbody:"table",col:"colgroup"},n=/<yield\s+to=(['"])?@\1\s*>([\S\s]+?)<\/yield\s*>/.source,r="div";e=e&&e<10;function i(n,i){var f=n&&n.match(/^\s*<([-\w]+)/),u=f&&f[1].toLowerCase(),s=t[u]||r,c=W(s);c.stub=true;if(i)n=a(n,i);if(e&&u&&(f=u.match(p)))o(c,n,u,!!f[1]);else c.innerHTML=n;return c}function o(e,t,n,i){var o=W(r),a=i?"select>":"table>",f;o.innerHTML="<"+a+t+"</"+a;f=ee(n,o);if(f)e.appendChild(f)}function a(e,t){if(!/<yield\b/i.test(e))return e;var r=0;e=e.replace(/<yield\s+from=['"]([-\w]+)['"]\s*(?:\/>|>\s*<\/yield\s*>)/gi,function(e,i){var o=t.match(RegExp(n.replace("@",i),"i"));++r;return o&&o[2]||""});return r?e:e.replace(/<yield\s*(?:\/>|>\s*<\/yield\s*>)/gi,t||"")}return i}(g);function b(e,t,n){var r={};r[e.key]=t;if(e.pos)r[e.pos]=n;return r}function y(e,t){var n=t.length,r=e.length,i;while(n>r){i=t[--n];t.splice(n,1);i.unmount()}}function w(e,t){Object.keys(e.tags).forEach(function(n){var r=e.tags[n];if(G(r))R(r,function(e){B(e,n,t)});else B(r,n,t)})}function x(e,t,n){var r=e._root,i;e._virts=[];while(r){i=r.nextSibling;if(n)t.insertBefore(r,n._root);else t.appendChild(r);e._virts.push(r);r=i}}function _(e,t,n,r){var i=e._root,o,a=0;for(;a<r;a++){o=i.nextSibling;t.insertBefore(i,n._root);i=o}}function S(e,t,n){A(e,"each");var r=typeof $(e,"no-reorder")!==u||A(e,"no-reorder"),i=D(e),a=o[i]||{tmpl:e.outerHTML},f=p.test(i),s=e.parentNode,c=document.createTextNode(""),l=H(e),d=/option/gi.test(i),g=[],h=[],m,S=e.tagName=="VIRTUAL";n=v.loopKeys(n);s.insertBefore(c,e);t.one("before-mount",function(){e.parentNode.removeChild(e);if(s.stub)s=t.root}).on("update",function(){var u=v(n.val,t),p=document.createDocumentFragment();if(!G(u)){m=u||false;u=m?Object.keys(u).map(function(e){return b(n,e,u[e])}):[]}u.forEach(function(u,c){var d=r&&u instanceof Object,v=h.indexOf(u),y=~v&&d?v:c,C=g[y];u=!m&&n.key?b(n,u,c):u;if(!d&&!C||d&&!~v||!C){C=new L(a,{parent:t,isLoop:true,hasImpl:!!o[i],root:f?s:e.cloneNode(),item:u},e.innerHTML);C.mount();if(S)C._root=C.root.firstChild;if(c==g.length){if(S)x(C,p);else p.appendChild(C.root)}else{if(S)x(C,s,g[c]);else s.insertBefore(C.root,g[c].root);h.splice(c,0,u)}g.splice(c,0,C);y=c}else C.update(u);if(y!==c&&d){if(S)_(C,s,g[c],e.childNodes.length);else s.insertBefore(C.root,g[c].root);if(n.pos)C[n.pos]=c;g.splice(c,0,g.splice(y,1)[0]);h.splice(c,0,h.splice(y,1)[0]);if(!l)w(C,c)}C._item=u;q(C,"_parent",t)},true);y(u,g);if(d)s.appendChild(p);else s.insertBefore(p,c);if(l)t.tags[i]=g;h=u.slice()})}var C=function(t){if(!e)return{add:function(){},inject:function(){}};var n=function(){var e=W("style");I(e,"type","text/css");var t=ee("style[type=riot]");if(t){if(t.id)e.id=t.id;t.parentNode.replaceChild(e,t)}else document.getElementsByTagName("head")[0].appendChild(e);return e}();var r=n.styleSheet,i="";Object.defineProperty(t,"styleNode",{value:n,writable:true});return{add:function(e){i+=e},inject:function(){if(i){if(r)r.cssText+=i;else n.innerHTML+=i;i=""}}}}(n);function N(e,t,n,r){Z(e,function(e){if(e.nodeType==1){e.isLoop=e.isLoop||(e.parentNode&&e.parentNode.isLoop||$(e,"each"))?1:0;if(n){var i=H(e);if(i&&!e.isLoop)n.push(K(i,{root:e,parent:t},e.innerHTML,t))}if(!e.isLoop||r)re(e,t,[])}})}function E(e,t,n){function r(e,t,r){if(v.hasExpr(t)){n.push(Q({dom:e,expr:t},r))}}Z(e,function(e){var n=e.nodeType,i;if(n==3&&e.parentNode.tagName!="STYLE")r(e,e.nodeValue);if(n!=1)return;i=$(e,"each");if(i){S(e,t,i);return false}R(e.attributes,function(t){var n=t.name,i=n.split("__")[1];r(e,t.value,{attr:i||n,bool:i});if(i){A(e,n);return false}});if(H(e))return false})}function L(e,o,a){var f=n.observable(this),l=te(o.opts)||{},p=o.parent,g=o.isLoop,h=o.hasImpl,b=V(o.item),y=[],w=[],x=o.root,_=e.fn,S=x.tagName.toLowerCase(),C={},L=[],O;if(_&&x._tag)x._tag.unmount(true);this.isMounted=false;x.isLoop=g;x._tag=this;q(this,"_riot_id",++r);Q(this,{parent:p,root:x,opts:l,tags:{}},b);R(x.attributes,function(e){var t=e.value;if(v.hasExpr(t))C[e.name]=t});O=m(e.tmpl,a);function j(){var e=h&&g?f:p||f;R(x.attributes,function(t){var n=t.value;l[k(t.name)]=v.hasExpr(n)?v(n,e):n});R(Object.keys(C),function(t){l[k(t)]=v(C[t],e)})}function $(e){for(var t in b){if(typeof f[t]!==c&&U(f,t))f[t]=e[t]}}function H(){if(!f.parent||!g)return;R(Object.keys(f.parent),function(e){var t=!z(d,e)&&z(L,e);if(typeof f[e]===c||t){if(!t)L.push(e);f[e]=f.parent[e]}})}function F(){var t=f.parent?f.parent._aliases||{}:{};J(e.attrs,function(e,n){if(e=="alias"){t[n]=f}});if(f.opts.alias){t[f.opts.alias]=f}if(Object.keys(t).length){f._aliases=t;for(var n in t){f[n]=t[n]}}}q(this,"update",function(e){e=V(e);H();if(e&&typeof b===s){$(e);b=e}Q(f,e);j();f.trigger("update",e);T(y,f);oe(function(){f.trigger("updated")});return this});q(this,"mixin",function(){R(arguments,function(e){var t;e=typeof e===u?n.mixin(e):e;if(M(e)){t=new e;e=e.prototype}else t=e;R(Object.getOwnPropertyNames(e),function(e){if(e!="init")f[e]=M(t[e])?t[e].bind(f):t[e]});if(t.init)t.init.bind(f)()});return this});q(this,"mount",function(){j();if(_)_.call(f,l);F();E(O,f,y);B(true);if(e.attrs||h){J(e.attrs,function(e,t){I(x,e,t)});E(f.root,f,y)}if(!f.parent||g)f.update(b);f.trigger("before-mount");if(g&&!h){f.root=x=O.firstChild}else{while(O.firstChild)x.appendChild(O.firstChild);if(x.stub)f.root=x=p.root}if(g)N(f.root,f.parent,null,true);if(!f.parent||f.parent.isMounted){f.isMounted=true;f.trigger("mount")}else f.parent.one("mount",function(){if(!X(f.root)){f.parent.isMounted=f.isMounted=true;f.trigger("mount")}})});q(this,"unmount",function(e){var n=x,r=n.parentNode,o;f.trigger("before-unmount");i.splice(i.indexOf(f),1);if(this._virts){R(this._virts,function(e){e.parentNode.removeChild(e)})}if(r){if(p){o=P(p);if(G(o.tags[S]))R(o.tags[S],function(e,t){if(e._riot_id==f._riot_id)o.tags[S].splice(t,1)});else o.tags[S]=t}else while(n.firstChild)n.removeChild(n.firstChild);if(!e)r.removeChild(n);else A(r,"riot-tag")}f.trigger("unmount");B();f.off("*");f.isMounted=false;delete x._tag});function B(e){R(w,function(t){t[e?"mount":"unmount"]()});if(!p)return;var t=e?"on":"off";if(g)p[t]("unmount",f.unmount);else p[t]("update",f.update)[t]("unmount",f.unmount)}N(O,this,w)}function O(t,n,r,i){r[t]=function(t){var o=i._parent,a=i._item,f;if(!a)while(o&&!a){a=o._item;o=o._parent}t=t||e.event;if(U(t,"currentTarget"))t.currentTarget=r;if(U(t,"target"))t.target=t.srcElement;if(U(t,"which"))t.which=t.charCode||t.keyCode;t.item=a;if(n.call(i,t)!==true&&!/radio|check/.test(r.type)){if(t.preventDefault)t.preventDefault();t.returnValue=false}if(!t.preventUpdate){f=a?P(o):i;f.update()}}}function j(e,t,n){if(!e)return;e.insertBefore(n,t);e.removeChild(t)}function T(e,t){R(e,function(e,n){var r=e.dom,i=e.attr,o=v(e.expr,t),u=e.dom.parentNode;if(e.bool)o=o?i:false;else if(o==null)o="";if(u&&u.tagName=="TEXTAREA"){o=(""+o).replace(/riot-/g,"");u.value=o}if(e.value===o)return;e.value=o;if(!i){r.nodeValue=""+o;return}A(r,i);if(M(o)){O(i,o,r,t)}else if(i=="if"){var c=e.stub,l=function(){j(c.parentNode,c,r)},p=function(){j(r.parentNode,r,c)};if(o){if(c){l();r.inStub=false;if(!X(r)){Z(r,function(e){if(e._tag&&!e._tag.isMounted)e._tag.isMounted=!!e._tag.trigger("mount")})}}}else{c=e.stub=c||document.createTextNode("");if(r.parentNode)p();else(t.parent||t).one("updated",p);r.inStub=true}}else if(/^(show|hide)$/.test(i)){if(i=="hide")o=!o;r.style.display=o?"":"none"}else if(i=="value"){r.value=o}else if(ie(i,a)&&i!=f){if(o)I(r,i.slice(a.length),o)}else{if(e.bool){r[i]=o;if(!o)return}if(o===0||o&&typeof o!==s)I(r,i,o)}})}function R(e,t){for(var n=0,r=(e||[]).length,i;n<r;n++){i=e[n];if(i!=null&&t(i,n)===false)n--}return e}function M(e){return typeof e===l||false}function A(e,t){e.removeAttribute(t)}function k(e){return e.replace(/-(\w)/g,function(e,t){return t.toUpperCase()})}function $(e,t){return e.getAttribute(t)}function I(e,t,n){e.setAttribute(t,n)}function H(e){return e.tagName&&o[$(e,f)||e.tagName.toLowerCase()]}function F(e,t,n){var r=n.tags[t];if(r){if(!G(r))if(r!==e)n.tags[t]=[r];if(!z(n.tags[t],e))n.tags[t].push(e)}else{n.tags[t]=e}}function B(e,t,n){var r=e.parent,i;if(!r)return;i=r.tags[t];if(G(i))i.splice(n,0,i.splice(i.indexOf(e),1)[0]);else F(e,t,r)}function K(e,t,n,r){var i=new L(e,t,n),o=D(t.root),a=P(r);i.parent=a;i._parent=r;F(i,o,a);if(a!==r)F(i,o,r);t.root.innerHTML="";return i}function P(e){var t=e;while(!H(t.root)){if(!t.parent)break;t=t.parent}return t}function q(e,t,n,r){Object.defineProperty(e,t,Q({value:n,enumerable:false,writable:false,configurable:false},r));return e}function D(e){var t=H(e),n=$(e,"name"),r=n&&!v.hasExpr(n)?n:t?t.name:e.tagName.toLowerCase();return r}function Q(e){var t,n=arguments;for(var r=1;r<n.length;++r){if(t=n[r]){for(var i in t){if(U(e,i))e[i]=t[i]}}}return e}function z(e,t){return~e.indexOf(t)}function G(e){return Array.isArray(e)||e instanceof Array}function U(e,t){var n=Object.getOwnPropertyDescriptor(e,t);return typeof e[t]===c||n&&n.writable}function V(e){if(!(e instanceof L)&&!(e&&typeof e.trigger==l))return e;var t={};for(var n in e){if(!z(d,n))t[n]=e[n]}return t}function Z(e,t){if(e){if(t(e)===false)return;else{e=e.firstChild;while(e){Z(e,t);e=e.nextSibling}}}}function J(e,t){var n,r=/([-\w]+) ?= ?(?:"([^"]*)|'([^']*)|({[^}]*}))/g;while(n=r.exec(e)){t(n[1].toLowerCase(),n[2]||n[3]||n[4])}}function X(e){while(e){if(e.inStub)return true;e=e.parentNode}return false}function W(e){return document.createElement(e)}function Y(e,t){return(t||document).querySelectorAll(e)}function ee(e,t){return(t||document).querySelector(e)}function te(e){function t(){}t.prototype=e;return new t}function ne(e){return $(e,"id")||$(e,"name")}function re(e,t,n){var r=ne(e),i,o=function(o){if(z(n,r))return;i=G(o);if(!o)t[r]=e;else if(!i||i&&!z(o,e)){if(i)o.push(e);else t[r]=[o,e]}};if(!r)return;if(v.hasExpr(r))t.one("mount",function(){r=ne(e);o(t[r])});else o(t[r])}function ie(e,t){return e.slice(0,t.length)===t}var oe=function(e){var t=e.requestAnimationFrame||e.mozRequestAnimationFrame||e.webkitRequestAnimationFrame;if(!t||/iP(ad|hone|od).*OS 6/.test(e.navigator.userAgent)){var n=0;t=function(e){var t=Date.now(),r=Math.max(16-(t-n),0);setTimeout(function(){e(n=t+r)},r)}}return t}(e||{});function ae(e,t,n){var r=o[t],a=e._innerHTML=e._innerHTML||e.innerHTML;e.innerHTML="";if(r&&e)r=new L(r,{root:e,opts:n},a);if(r&&r.mount){r.mount();if(!z(i,r))i.push(r)}return r}n.util={brackets:h,tmpl:v};n.mixin=function(){var e={};return function(t,n){if(!n)return e[t];e[t]=n}}();n.tag=function(e,t,n,r,i){if(M(r)){i=r;if(/^[\w\-]+\s?=/.test(n)){r=n;n=""}else r=""}if(n){if(M(n))i=n;else C.add(n)}o[e]={name:e,tmpl:t,attrs:r,fn:i};return e};n.tag2=function(e,t,n,r,i,a){if(n)C.add(n);o[e]={name:e,tmpl:t,attrs:r,fn:i};return e};n.mount=function(e,t,n){var r,i,a=[];function c(e){var t="";R(e,function(e){if(!/[^-\w]/.test(e))t+=",*["+f+"="+e.trim()+"]"});return t}function l(){var e=Object.keys(o);return e+c(e)}function p(e){var r;if(e.tagName){if(t&&(!(r=$(e,f))||r!=t))I(e,f,t);var i=ae(e,t||e.getAttribute(f)||e.tagName.toLowerCase(),n);if(i)a.push(i)}else if(e.length)R(e,p)}C.inject();if(typeof t===s){n=t;t=0}if(typeof e===u){if(e==="*")e=i=l();else e+=c(e.split(","));r=e?Y(e):[]}else r=e;if(t==="*"){t=i||l();if(r.tagName)r=Y(t,r);else{var d=[];R(r,function(e){d.push(Y(t,e))});r=d}t=0}if(r.tagName)p(r);else R(r,p);return a};n.update=function(){return R(i,function(e){e.update()})};n.Tag=L;var fe=function(){var t={none:function(e){return e}};t.javascript=t.none;function n(n,r){var i;switch(n){case"coffee":r="CoffeeScript";break;case"es6":case"babel":r="babel";break;case"none":case"javascript":return t.none;default:if(!r)r=n;break}i=e[r];if(!i)throw new Error(r+" parser not found.");t[n]=i;return i}function r(e,r){return e in t?t[e]:n(e,r)}var i={jade:function(e,t,n){return r("jade").render(e,Q({pretty:true,filename:n,doctype:"html"},t))}};var o={less:function(e,t,n,i){var o=r("less"),a;o.render(t,Q({sync:true,compress:true},n),function(e,t){if(e)throw e;a=t.css});return a},stylus:function(e,t,n,i){var o=r("stylus"),a=r("nib");return a?o(t).use(a()).import("nib").render():o.render(t)}};var a={livescript:function(e,t,n){return r("livescript").compile(e,Q({bare:true,header:false},t))},typescript:function(e,t,n){return r("typescript")(e,t).replace(/\r\n?/g,"\n")},es6:function(e,t,n){return r("es6").transform(e,Q({blacklist:["useStrict","strict","react"],sourceMaps:false,comments:false},t)).code},babel:function(e,t,n){return r("babel").transform(e,Q({filename:n||""},t)).code},coffee:function(e,t,n){return r("coffee").compile(e,Q({bare:true},t))},none:t.none};a.javascript=a.none;a.coffeescript=a.coffee;return{html:i,css:o,js:a,_req:r}}();n.parsers=fe;var ue=function(){function e(e,t){return new RegExp(e,t)}var t=e("^(?:disabled|checked|readonly|required|allowfullscreen|auto(?:focus|play)|"+"compact|controls|default|formnovalidate|hidden|ismap|itemscope|loop|"+"multiple|muted|no(?:resize|shade|validate|wrap)?|open|reversed|seamless|"+"selected|sortable|truespeed|typemustmatch)$"),r=["style","src","d"],i=/^(?:input|img|br|wbr|hr|area|base|col|embed|keygen|link|meta|param|source|track)$/,o=/\s*([-\w:\xA0-\xFF]+)\s*(?:=\s*('[^']+'|"[^"]+"|\S+))?/g,a=/[ \t]+$/gm;function f(e){return"'"+(e?e.replace(/\\/g,"\\\\").replace(/'/g,"\\'").replace(/\n/g,"\\n").replace(/\r/g,"\\r"):"")+"'"}function u(e,t,n,r,i,o){var a=", ",u="}"+(o.length?", "+f(o._bp[8]):"")+");";if(i&&i.slice(-1)!=="\n")u="\n"+u;return"riot.tag2('"+e+"'"+a+f(t)+a+f(n)+a+f(r)+", function(opts) {\n"+i+u}function s(e,t){for(var n in t){if(t.hasOwnProperty(n)){e[n]=t[n]}}return e}function c(e,n){var i=[],a,f,u,s=n._bp,c='"';o.lastIndex=0;e=e.replace(/\s+/g," ");while(a=o.exec(e)){f=a[1].toLowerCase();u=a[2];if(!u){i.push(f)}else{if(u[0]!==c)u=c+(u[0]==="'"?u.slice(1,-1):u)+c;if(f==="type"&&u.toLowerCase()==='"number"'){u=c+s[0]+"'number'"+s[1]+c}else if(/\u0001\d/.test(u)){if(t.test(f)){f="__"+f}else if(~r.indexOf(f)){f="riot-"+f}}i.push(f+"="+u)}}return i.join(" ")}function l(e,t,n){var r=n._bp;if(e&&r[4].test(e)){var i=t.expr&&(t.parser||t.type)?_:0,o=h.split(e,0,r),a;for(var f=1;f<o.length;f+=2){a=o[f];if(a[0]==="^")a=a.slice(1);else if(i){var u=a[0]==="=";a=i(u?a.slice(1):a,t).trim();if(a.slice(-1)===";")a=a.slice(0,-1);if(u)a="="+a}o[f]=""+(n.push(a.replace(/[\r\n]+/g," ").trim())-1)+r[1]}e=o.join("")}return e}function p(e,t){if(t.length){e=e.replace(/\u0001(\d+)/g,function(e,n){var r=t[n];if(r[0]==="="){r=r.replace(h.R_STRINGS,function(e){return e.replace(/</g,"&lt;").replace(/>/g,"&gt;")})}return t._bp[0]+r.replace(/"/g,"‚Åó")})}return e}var d=/<!--(?!>)[\S\s]*?-->/g,g=/<([-\w]+)\s*([^"'\/>]*(?:(?:"[^"]*"|'[^']*'|\/[^>])[^'"\/>]*)*)(\/?)>/g,v=e(/<pre(?:\s+[^'">]+(?:(?:@Q)[^'">]*)*|\s*)?>([\S\s]*?)<\/pre\s*>/.source.replace("@Q",h.R_STRINGS.source),"gi");function m(e,t,n){e=l(e,t,n).replace(g,function(e,t,r,o){t=t.toLowerCase();o=o&&!i.test(t)?"></"+t:"";if(r)t+=" "+c(r,n);return"<"+t+o+">"});if(!t.whitespace){if(/<pre[\s>]/.test(e)){var r=[];e=e.replace(v,function(e){return r.push(e)&&""}).trim().replace(/\s+/g," ");if(r.length)e=e.replace(/\u0002/g,function(e){return r.shift()})}else e=e.trim().replace(/\s+/g," ")}if(t.compact)e=e.replace(/> <([-\w\/])/g,"><$1");return p(e,n)}function b(e,t,n){if(Array.isArray(t)){n=t;t={}}else{if(!n)n=[];if(!t)t={}}if(!n.__intflag)e=e.replace(/\r\n?/g,"\n").replace(d,"").replace(a,"");if(!n._bp)n._bp=h.array(t.brackets);return m(e,t,n)}var y=e("("+h.S_QBLOCKS+")|"+h.R_MLCOMMS.source+"|//[^\r\n]*","g"),w=/^([ \t]*)([$_A-Za-z][$\w]*)\s*(\([^()]*\)\s*{)/m;function x(t){var n,r,i=[],o;t=t.replace(y,function(e,t){return t?e:" "});while(n=t.match(w)){i.push(RegExp.leftContext);t=RegExp.rightContext;o=a(t);r=!/^(?:if|while|for|switch|catch|function)$/.test(n[2]);if(r)n[0]=n[1]+"this."+n[2]+" = function"+n[3];i.push(n[0],t.slice(0,o));t=t.slice(o);if(r&&!/^\s*.\s*bind\b/.test(t))i.push(".bind(this)")}return i.length?i.join("")+t:t;function a(t){var n=e("([{}])|"+h.S_QBLOCKS,"g"),r=1,i;while(r&&(i=n.exec(t))){if(i[1])i[1]==="{"?++r:--r}return r?t.length:n.lastIndex}}function _(e,t,n,r,i){if(!e)return"";if(!n)n=t.type;var o=t.parser||(n?fe.js[n]:x);if(!o)throw new Error('JS parser not found: "'+n+'"');return o(e,r,i).replace(a,"")}function S(e,t,n,r){if(typeof t==="string"){r=n;n=t;t={}}if(typeof n==="object"){r=n;n=""}else if(!r)r={};return _(e,t,n,r.parserOptions,r.url)}var C=e("(}|{|^)[ ;]*([^@ ;{}][^{}]*)(?={)|"+h.R_STRINGS.source,"g");function N(e,t){var n=":scope";return t.replace(C,function(t,r,i){if(!i)return t;i=i.replace(/[^,]+/g,function(t){var r=t.trim();if(r&&r!=="from"&&r!=="to"&&r.slice(-1)!=="%"){if(r.indexOf(n)<0)r=n+" "+r;r=r.replace(n,e)+","+r.replace(n,'[riot-tag="'+e+'"]')}return t.slice(-1)===" "?r+" ":r});return r?r+" "+i:i})}function E(e,t,n,r){var i=(r||(r={})).scoped;if(n){if(n==="scoped-css"){i=true}else if(fe.css[n]){e=fe.css[n](t,e,r.parserOpts,r.url)}else if(n!=="css"){throw new Error('CSS parser not found: "'+n+'"')}}e=e.replace(h.R_MLCOMMS,"").replace(/\s+/g," ").trim();if(i){if(!t)throw new Error("Can not parse scoped CSS without a tagName");e=N(t,e)}return e}function L(e,t,n){if(typeof t==="object"){n=t;t=""}else if(!n)n={};return E(e,n.tagName,t,n)}var O=/\stype\s*=\s*(?:(['"])(.+?)\1|(\S+))/i,j=/\s*=\s*("(?:\\[\S\s]|[^"\\]*)*"|'(?:\\[\S\s]|[^'\\]*)*'|\{[^}]+}|\S+)/.source;function T(e){if(e){var t=e.match(O);e=t&&(t[2]||t[3])}return e?e.replace("text/",""):""}function R(t,n){if(t){var r=e("\\s"+n+j,"i"),i=t.match(r);t=i&&i[1];if(t)return/^['"]/.test(t)?t.slice(1,-1):t}return""}function M(e){var t=R(e,"options");if(t)t=JSON.parse(t);return t}function A(e,t,n,r){var i=T(n),o=M(n);return _(e,t,i,o,r)}var k=/\/>\n|^<(?:\/[\w\-]+\s*|[\w\-]+(?:\s+(?:[-\w:\xA0-\xFF][\S\s]*?)?)?)>\n/;function $(e){var t,n;if(e[e.length-1]===">")return[e,""];t=e.lastIndexOf("<");while(~t){if(n=e.slice(t).match(k)){t+=n.index+n[0].length;return[e.slice(0,t),e.slice(t)]}t=e.lastIndexOf("<",t-1)}return["",e]}function I(e,t,n,r){var i=fe.html[n];if(!i)throw new Error('Template parser not found: "'+n+'"');return i(e,r,t)}var H=e(/^([ \t]*)<([-\w]+)(?:\s+([^'"\/>]+(?:(?:@Q|\/[^>])[^'"\/>]*)*)|\s*)?(?:\/>|>[ \t]*\n?([\S\s]*)^\1<\/\2\s*>|>(.*)<\/\2\s*>)/.source.replace("@Q",h.R_STRINGS.source),"gim"),F=/<style(\s+[^>]*)?>\n?([^<]*(?:<(?!\/style\s*>)[^<]*)*)<\/style\s*>/gi,B=e(F.source.replace(/tyle/g,"cript"),"gi");function K(t,n,r){var i=[],o;if(!n)n={};o=n.exclude||false;function f(e){return!(o&&~o.indexOf(e))}var s=h.array(n.brackets);if(n.template)t=I(t,r,n.template,n.templateOptions);t=t.replace(/\r\n?/g,"\n").replace(H,function(t,o,g,h,v,b){var y="",w="",x="",S=[];S._bp=s;S.__intflag=1;g=g.toLowerCase();h=h&&f("attribs")?p(c(l(h,n,S),S),S):"";if(b)v=b;if(v&&(v=v.replace(d,""))&&/\S/.test(v)){if(b){x=f("html")?m(b,n,S):""}else{v=v.replace(e("^"+o,"gm"),"");v=v.replace(F,f("css")?function(e,t,i){var o={scoped:t&&/\sscoped(\s|=|$)/i.test(t),url:r,parserOpts:M(t)};w+=(w?" ":"")+E(i,g,T(t)||n.style,o);return""}:"");v=v.replace(B,f("js")?function(e,t,i){y+=(y?"\n":"")+A(i,n,t,r);return""}:"");var C=$(v.replace(a,""));if(f("html")){v=C[0];if(v)x=m(v,n,S)}if(f("js")){v=C[1];if(/\S/.test(v))y+=(y?"\n":"")+_(v,n,null,null,r)}}}y=/\S/.test(y)?y.replace(/\n{3,}/g,"\n\n"):"";if(n.entities){i.push({tagName:g,html:x,css:w,attribs:h,js:y});return""}return u(g,x,w,h,y,S)});if(n.entities)return i;return t}n.util.compiler={compile:K,html:b,css:L,js:S,version:"v2.3.19"};return K}();n.compile=function(){var r=e.document,i,o;function a(e,t,n){var r=new XMLHttpRequest;r.onreadystatechange=function(){if(r.readyState===4&&(r.status===200||!r.status&&r.responseText.length))t(r.responseText,n,e)};r.open("GET",e,true);r.send("")}function f(e){if(typeof e===u){var t=r.createElement("script"),n=r.documentElement;t.text=e;n.appendChild(t);n.removeChild(t)}}function c(e,t){var n=r.querySelectorAll('script[type="riot/tag"]'),u=n.length;function s(){i.trigger("ready");o=true;if(e)e()}function c(e,t,n){var r=ue(e,t,n);if(n)r+="\n//# sourceURL="+n+".js";f(r);if(!--u)s()}if(!u)s();else{for(var l=0;l<n.length;++l){var p=n[l],d={template:p.getAttribute("template")},g=p.getAttribute("src");if(t)d=Q(d,t);g?a(g,c,d):c(p.innerHTML,d)}}}return function(e,r,l){if(typeof e===u){if(typeof r===s){l=r;r=false}if(/^\s*</.test(e)){var p=ue(e,l);if(r!==true)f(p);if(M(r))r(p,e,l);return p}a(e,function(t){var n=ue(t,l,e);f(n);if(r)r(n,t,l)})}else{if(M(e)){l=r;r=e}else{l=e;r=t}if(o)return r&&r();if(i){if(r)i.on("ready",r)}else{i=n.observable();c(r,l)}}}}();var se=n.mount;n.mount=function(e,t,r){var i;n.compile(function(){i=se(e,t,r)});return i};if(typeof exports===s)module.exports=n;else if(typeof define===l&&typeof define.amd!==c)define(function(){return n});else e.riot=n})(typeof window!="undefined"?window:void 0);